<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Phylogénie</title>
  <style>
    body {
      margin: 0;
      font-family: monospace;
    }
    #view {
      white-space: pre;
      line-height: 1;
      font-size: 14px;
    }
    .toggle {
      cursor: pointer;
      user-select: none;
    }
  </style>
</head>
<body>


  
<h2>Phylogénie des pathogènes et ravageurs des arbres</h2>

<pre id="source" style="display: none;">
├── Basidiomycota [+]
│   ├── Agaricomycetes [+]
│   │   ├── Agaricales [+]
│   │   │   ├── Coprinus comatus
│   │   │   └── Coprinellus micaceus
│   │   └── Russulales
</pre>

<pre id="view"></pre>



<pre>
Life
├── Eukaryota
│   ├── Bikonta
│   │   ├── Heterokonta
│   │   │   └── Oomycota
│   │   │       └── Oomycetes
│   │   │           └── Peronosporales
│   │   │               └── Peronosporaceae
│   │   │                   └── Phytophthora
│   │   │                       ├── Phytophthora alni
│   │   │                       ├── Phytophthora cactorum
│   │   │                       ├── Phytophthora x cambivora
│   │   │                       ├── Phytophthora cinnamomi
│   │   │                       ├── Phytophthora kernoviae
│   │   │                       ├── Phytophthora plurivora
│   │   │                       └── Phytophthora ramorum
│   │   └── Plantae
│   │       └── Angiospermae
│   │           └── Magnoliopsida
│   │               └── Santalales
│   │                   └── Viscaceae
│   │                       └── Viscum
│   │                           └── Viscum album
│   └── Unikonta
│       ├── Metazoa
│       │   ├── Deuterostomia
│       │   │   └── Chordata
│       │   │       ├── Aves
│       │   │       │   └── Psittaciformes
│       │   │       │       └── Psittacidae
│       │   │       │           └── Psittacula
│       │   │       │               └── Psittacula krameri
│       │   │       └── Mammalia
│       │   │           ├── Artiodactyla
│       │   │           │   ├── Cervidae
│       │   │           │   │   ├── Capreolus
│       │   │           │   │   │   └── Capreolus capreolus
│       │   │           │   │   └── Cervus
│       │   │           │   │       └── Cervus elaphus
│       │   │           │   └── Suidae
│       │   │           │       └── Sus
│       │   │           │           └── Sus scrofa
│       │   │           ├── Lagomorpha
│       │   │           │   └── Leporidae
│       │   │           │       ├── Lepus
│       │   │           │       │   └── Lepus europaeus
│       │   │           │       └── Oryctolagus
│       │   │           │           └── Oryctolagus cuniculus
│       │   │           ├── Rodentia
│       │   │           │   ├── Muridae
│       │   │           │   └── Castoridae
│       │   │           │       └── Castor
│       │   │           │           └── Castor fiber
│       │   │           └── Carnivora
│       │   │               ├── Felidae
│       │   │               │   └── Felis
│       │   │               │       └── Felis silvestris catus
│       │   │               └── Canidae
│       │   │                   └── Canis
│       │   │                       └── Canis lupus familiaris
│       │   └── Protostomia
│       │       ├── Nematoda
│       │       │   └── Secernentea
│       │       │       └── Aphelenchida
│       │       │           └── Parasitaphelenchidae
│       │       │               └── Bursaphelenchus
│       │       │                   └── Bursaphelenchus xylophilus
│       │       └── Arthropoda
│       │           ├── Arachnida
│       │           │   └── Trombidiformes
│       │           │       ├── Eriophyidae
│       │           │       │   ├── Aceria
│       │           │       │   │   ├── Aceria fraxinivora
│       │           │       │   │   └── Aceria nervisequa
│       │           │       │   └── Eriophyes
│       │           │       └── Tetranychidae
│       │           │           ├── Panonychus
│       │           │           │   └── Panonychus ulmi
│       │           │           └── Tetranychus
│       │           │               └── Tetranychus viennensis
│       │           └── Insecta
│       │               ├── Hymenoptera
│       │               │   ├── Agaridae
│       │               │   │   └── Aproceros
│       │               │   │       └── Aproceros leucopoda
│       │               │   ├── Cynipidae
│       │               │   │   └── Dryocosmus
│       │               │   │       └── Dryocosmus kuriphilus
│       │               │   └── Tenthredinidae
│       │               │       └── Macrophya
│       │               │           └── Macrophya punctumalbum
│       │               ├── Hemiptera
│       │               │   ├── Aphididae
│       │               │   │   └── Tetraneura
│       │               │   │       └── Tetraneura nigriabdominalis
│       │               │   ├── Coccidae
│       │               │   │   └── Pulvinaria
│       │               │   │       └── Pulvinaria regalis
│       │               │   ├── Eriococcidae
│       │               │   │   └── Cryptococcus
│       │               │   │       └── Cryptococcus fagisuga
│       │               │   ├── Phylloxeridae
│       │               │   │   └── Phylloxera
│       │               │   │       └── Phylloxera glabra
│       │               │   └── Tingidae
│       │               │       └── Corythucha
│       │               │           └── Corythucha ciliata
│       │               ├── Lepidoptera
│       │               │   ├── Castniidae
│       │               │   │   └── Paysandisia
│       │               │   │       └── Paysandisia archon
│       │               │   ├── Crambidae
│       │               │   │   └── Cydalima
│       │               │   │       └── Cydalima perspectalis
│       │               │   ├── Erebidae
│       │               │   │   └── Lymantria
│       │               │   │       └── Lymantria dispar
│       │               │   ├── Gracillariidae
│       │               │   │   └── Cameraria
│       │               │   │       └── Cameraria ohridella
│       │               │   ├── Pyralidae
│       │               │   │   └── Dioryctria
│       │               │   │       └── Dioryctria sylvestrella
│       │               │   ├── Sesiidae
│       │               │   │   └── Sesia
│       │               │   │       └── Sesia apiformis
│       │               │   ├── Tischeriidae
│       │               │   │   └── Tischeria
│       │               │   │       └── Tischeria ekebladella
│       │               │   ├── Tortricidae
│       │               │   │   └── Cydia
│       │               │   │       └── Cydia pomonella
│       │               │   ├── Notodontidae
│       │               │   │   └── Thaumetopoea
│       │               │   │       ├── Thaumetopoea pityocampa
│       │               │   │       └── Thaumetopoea processionea
│       │               │   └── Cossidae
│       │               │       ├── Cossus
│       │               │       │   └── Cossus cossus
│       │               │       └── Zeuzera
│       │               │           └── Zeuzera pyrina
│       │               └── Coleoptera
│       │                   ├── Dryophthoridae
│       │                   │   └── Rhynchophorus
│       │                   │       └── Rhynchophorus ferrugineus
│       │                   ├── Scarabaeidae
│       │                   │   └── Melolontha
│       │                   │       └── Melolontha melolontha
│       │                   ├── Attelabidae
│       │                   │   ├── Byctiscus
│       │                   │   │   └── Byctiscus betulae
│       │                   │   └── Rhynchites
│       │                   │       └── Rhynchites coeruleus
│       │                   ├── Chrysomelidae
│       │                   │   ├── Agelastica
│       │                   │   │   └── Agelastica alni
│       │                   │   └── Xanthogaleruca
│       │                   │       └── Xanthogaleruca luteola
│       │                   ├── Cerambycidae
│       │                   │   ├── Anoplophora
│       │                   │   │   └── Anoplophora glabripennis
│       │                   │   └── Cerambyx
│       │                   │       ├── Cerambyx cerdo
│       │                   │       └── Cerambyx welensii
│       │                   ├── Buprestidae
│       │                   │   ├── Agrilus
│       │                   │   │   └── Agrilus biguttatus
│       │                   │   ├── Coraebus
│       │                   │   │   └── Coraebus florentinus
│       │                   │   └── Lamprodila
│       │                   │       └── Lamprodila festiva
│       │                   └── Curculionidae
│       │                       ├── Hylobius
│       │                       │   └── Hylobius abietis
│       │                       ├── Ips
│       │                       │   ├── Ips sexdentatus
│       │                       │   └── Ips typographus
│       │                       ├── Otiorhynchus
│       │                       ├── Scolytus
│       │                       │   ├── Scolytus multistriatus
│       │                       │   └── Scolytus scolytus
│       │                       ├── Tomicus
│       │                       │   └── Tomicus piniperda
│       │                       └── Xyleborus
│       │                           └── Xyleborus dispar
│       └── Fungi
│           ├── Ascomycota
│           │   ├── incertae sedis
│           │   │   └── Cryptostroma
│           │   │       └── Cryptostroma corticale
│           │   ├── incertae sedis
│           │   │   └── Pycnostysanus
│           │   │       └── Pycnostysanus azaleae
│           │   ├── incertae sedis
│           │   │   └── Sphaeropsis
│           │   │       └── Sphaeropsis sapinea
│           │   ├── Pezizomycetes
│           │   │   └── Pezizales
│           │   │       └── Rhizinaceae
│           │   │           └── Rhizina
│           │   │               └── Rhizina undulata
│           │   ├── Taphrinomycetes
│           │   │   └── Taphrinales
│           │   │       └── Taphrinaceae
│           │   │           └── Taphrina
│           │   │               ├── Taphrina aurea
│           │   │               └── Taphrina carpini
│           │   ├── Dothideomycetes
│           │   │   ├── incertae sedis
│           │   │   │   └── Asterinaceae
│           │   │   │       └── Thyriopsis
│           │   │   │           └── Thyriopsis halepensis
│           │   │   ├── Venturiales
│           │   │   │   └── Venturiaceae
│           │   │   │       ├── Fusicladium
│           │   │   │       │   └── Fusicladium saliciperdum
│           │   │   │       └── Venturia
│           │   │   │           └── Venturia inaequalis
│           │   │   ├── Dothideales
│           │   │   │   ├── Fumagines
│           │   │   │   └── Dothideaceae
│           │   │   │       └── Rhizosphaera
│           │   │   │           ├── Rhizosphaera kalkhoffii
│           │   │   │           └── Rhizosphaera pini
│           │   │   ├── Capnodiales
│           │   │   │   └── Mycosphaerellaceae
│           │   │   │       ├── Lecanosticta
│           │   │   │       │   └── Lecanosticta acicola
│           │   │   │       ├── Stigmina
│           │   │   │       │   └── Stigmina carpophila
│           │   │   │       ├── Nothophaeocryptopus
│           │   │   │       │   └── Nothophaeocryptopus gaeumannii
│           │   │   │       └── Dothistroma
│           │   │   │           ├── Dothistroma septosporum
│           │   │   │           └── Dothistroma pini
│           │   │   ├── Pleosporales
│           │   │   │   └── Pleomassariaceae
│           │   │   │       └── Splanchnonema
│           │   │   │           └── Splanchnonema platani
│           │   │   └── Botryosphaeriales
│           │   │       └── Phyllostictaceae
│           │   │           └── Phyllosticta
│           │   │               └── Phyllosticta paviae
│           │   ├── Leotiomycetes
│           │   │   ├── Chaetomellales
│           │   │   │   └── Marthamycetaceae
│           │   │   │       └── Cyclaneusma
│           │   │   │           └── Cyclaneusma minus
│           │   │   ├── Erysiphales
│           │   │   │   └── Erysiphaceae (Oïdiums)
│           │   │   ├── Helotiales
│           │   │   │   ├── Cenangiaceae
│           │   │   │   │   └── Rhabdocline
│           │   │   │   │       └── Rhabdocline pseudotsugae
│           │   │   │   ├── Dermateaceae
│           │   │   │   │   ├── Marssonina
│           │   │   │   │   │   ├── Marssonina brunnea
│           │   │   │   │   │   └── Marssonina salicicola
│           │   │   │   ├── Drepanopezizaceae
│           │   │   │   │   └── Blumeriella
│           │   │   │   │       └── Blumeriella jaapii
│           │   │   │   ├── Helotiaceae
│           │   │   │   │   ├── Crumenulopsis
│           │   │   │   │   │   └── Crumenulopsis sororia
│           │   │   │   │   └── Hymenoscyphus
│           │   │   │   │       └── Hymenoscyphus fraxineus
│           │   │   │   ├── Incertae sedis
│           │   │   │   │   └── Cryptocline
│           │   │   │   │       └── Cryptocline taxicola
│           │   │   │   ├── Lachnaceae
│           │   │   │   │   └── Lachnellula
│           │   │   │   │       └── Lachnellula willkommii
│           │   │   │   ├── Phacidiaceae
│           │   │   │   │   └── Allantophomopsiella
│           │   │   │   │       └── Allantophomopsiella pseudotsugae
│           │   │   │   └── Sclerotiniaceae
│           │   │   │       ├── Botrytis
│           │   │   │       │   └── Botrytis cinerea
│           │   │   │       ├── Cristulariella
│           │   │   │       │   └── Cristulariella depraedans
│           │   │   │       └── Monilinia
│           │   │   │           ├── Monilinia fruticola
│           │   │   │           ├── Monilinia fructigena
│           │   │   │           └── Monilinia laxa
│           │   │   └── Rhytismatales
│           │   │       └── Rhytismataceae
│           │   │           ├── Lophodermium
│           │   │           │   └── Lophodermium seditiosum
│           │   │           └── Rhytisma
│           │   │               └── Rhytisma acerinum
│           │   └── Sordariomycetes
│           │       ├── Glomerellales
│           │       │   └── Plectosphaerellaceae
│           │       │       └── Verticilium
│           │       ├── Diaporthales
│           │       │   ├── Cryphonectriaceae
│           │       │   │   └── Cryphonectria
│           │       │   │       └── Cryphonectria parasitica
│           │       │   ├── Gnomoniaceae
│           │       │   │   ├── Apiognomonia
│           │       │   │   │   ├── Apiognomonia errabunda
│           │       │   │   │   └── Apiognomonia veneta
│           │       │   │   ├── Cryptodiaporthe
│           │       │   │   │   └── Cryptodiaporthe populea
│           │       │   │   ├── Diplodina
│           │       │   │   │   └── Diplodina castanea
│           │       │   │   └── Ophiognomonia
│           │       │   │       └── Ophiognomonia leptostyla
│           │       │   └── Valsaceae
│           │       │       └── Cytospora
│           │       │           └── Cytospora chrysosperma
│           │       ├── Hypocreales
│           │       │   ├── Bionectriaceae
│           │       │   │   └── Geosmithia
│           │       │   │       └── Geosmithia morbida
│           │       │   └── Nectriaceae
│           │       │       ├── Fusarium
│           │       │       │   └── Fusarium circinatum
│           │       │       ├── Nectria
│           │       │       │   ├── Nectria cinnabarina
│           │       │       │   └── Nectria galligena
│           │       │       ├── Neonectria
│           │       │       │   ├── Neonectria coccinea
│           │       │       │   ├── Neonectria ditissima
│           │       │       │   └── Neonectria faginata
│           │       │       ├── Pseudonectria
│           │       │       │   └── Pseudonectria buxi
│           │       │       └── Cylindrocladium
│           │       │           └── Cylindrocladium buxicola
│           │       ├── Microascales
│           │       │   └── Ceratocystidaceae
│           │       │       └── Ceratocystis
│           │       │           └── Ceratocystis platani
│           │       ├── Ophiostomatales
│           │       │   └── Ophiostomataceae
│           │       │       └── Ophiostoma
│           │       │           ├── Ophiostoma ulmi
│           │       │           └── Ophiostoma novo-ulmi
│           │       └── Xylariales
│           │           ├── Amphisphaeriaceae
│           │           │   └── Seiridium
│           │           │       └── Seiridium cardinale
│           │           ├── Diatrypaceae
│           │           │   └── Anthostoma
│           │           │       └── Anthostoma decipiens
│           │           └── Xylariaceae
│           │               ├── Daldinia
│           │               │   └── Daldinia concentrica
│           │               ├── Kretzschmaria
│           │               │   └── Kretzschmaria deusta
│           │               └── Rosellinia
│           │                   └── Rosellinia necatrix
│           └── Basidiomycota
│               ├── Agaricomycetes
│               │   ├── Agaricales
│               │   │   ├── Agaricaceae
│               │   │   │   ├── Agaricus
│               │   │   │   │   └── Agaricus campestris
│               │   │   │   ├── Coprinellus
│               │   │   │   │   └── Coprinellus micaceus
│               │   │   │   ├── Coprinopsis
│               │   │   │   │   └── Coprinopsis atramentaria
│               │   │   │   └── Coprinus
│               │   │   │       └── Coprinus comatus
│               │   │   ├── incertae sedis
│               │   │   │   └── Fistulina
│               │   │   │       └── Fistulina hepatica
│               │   │   ├── Physalacriaceae
│               │   │   │   ├── Armillaria
│               │   │   │   │   ├── Armillaria mellea
│               │   │   │   │   ├── Armillaria ostoyae
│               │   │   │   │   └── Armillaria tabescens
│               │   │   │   └── Oudemansiella
│               │   │   │       └── Oudemansiella mucida
│               │   │   ├── Pleurotaceae
│               │   │   │   └── Pleurotus
│               │   │   │       └── Pleurotus ostreatus
│               │   │   ├── Schizophyllaceae
│               │   │   │   └── Schizophyllum
│               │   │   │       └── Schizophyllum commune
│               │   │   ├── Strophariaceae
│               │   │   │   ├── Cyclocybe
│               │   │   │   │   └── Cyclocybe aegerita
│               │   │   │   └── Pholiota
│               │   │   │       └── Pholiota squarrosa
│               │   │   └── Tricholomataceae
│               │   │       └── Gymnopus
│               │   │           └── Gymnopus fusipes
│               │   ├── Auriculariales
│               │   │   └── Auriculariaceae
│               │   │       └── Auricularia
│               │   │           ├── Auricularia auricula-judae
│               │   │           └── Auricularia mesenterica
│               │   ├── Hymenochaetales
│               │   │   ├── Hymenochaetaceae
│               │   │   │   ├── Fomitiporia
│               │   │   │   │   ├── Fomitiporia mediterranea
│               │   │   │   │   ├── Fomitiporia punctata
│               │   │   │   │   └── Fomitiporia robusta
│               │   │   │   ├── Fuscoporia
│               │   │   │   │   └── Fuscoporia torulosa
│               │   │   │   ├── Inonotus
│               │   │   │   │   ├── Inonotus cuticularis
│               │   │   │   │   ├── Inonotus dryadeus
│               │   │   │   │   ├── Inonotus hispidus
│               │   │   │   │   └── Inonotus nodulosus
│               │   │   │   ├── Phellinus
│               │   │   │   │   ├── Phellinus hartigii
│               │   │   │   │   ├── Phellinus igniarius
│               │   │   │   │   └── Phellinus tuberculosus
│               │   │   │   └── Porodaedalea
│               │   │   │       └── Porodaedalea pini
│               │   │   ├── incertae sedis
│               │   │   │   └── Trichaptum
│               │   │   │       └── Trichaptum biforme
│               │   │   └── Oxyporaceae
│               │   │       └── Oxyporus
│               │   │          └── Oxyporus populinus
│               │   ├── Polyporales
│               │   │   ├── Fomitopsidaceae
│               │   │   │   ├── Daedalea
│               │   │   │   │   └── Daedalea quercina
│               │   │   │   ├── Fomitopsis
│               │   │   │   │   ├── Fomitopsis betulina
│               │   │   │   │   └── Fomitopsis pinicola
│               │   │   │   ├── Laetiporus
│               │   │   │   │   └── Laetiporus sulphureus
│               │   │   │   └── Phaeolus
│               │   │   │       └── Phaeolus schweinitzii
│               │   │   ├── Ganodermataceae
│               │   │   │   └── Ganoderma
│               │   │   │       ├── Ganoderma adspersum
│               │   │   │       ├── Ganoderma applanatum
│               │   │   │       ├── Ganoderma carnosum
│               │   │   │       ├── Ganoderma lucidum
│               │   │   │       └── Ganoderma resinaceum
│               │   │   ├── Hapalopilaceae
│               │   │   │   ├── Bjerkandera
│               │   │   │   │   └── Bjerkandera adusta
│               │   │   │   ├── Ischnoderma
│               │   │   │   │   └── Ischnoderma benzoinum
│               │   │   │   └── Spongipellis
│               │   │   │       └── Spongipellis spumeus
│               │   │   ├── Meripilaceae
│               │   │   │   ├── Grifola
│               │   │   │   │   └── Grifola frondosa
│               │   │   │   ├── Meripilus
│               │   │   │   │   └── Meripilus giganteus
│               │   │   │   └── Rigidoporus
│               │   │   │       └── Rigidoporus ulmarius
│               │   │   ├── Meruliaceae
│               │   │   │   └── Chondrostereum
│               │   │   │       └── Chondrostereum purpureum
│               │   │   ├── Polyporaceae
│               │   │   │   ├── Daedaleopsis
│               │   │   │   │   └── Daedaleopsis confragosa
│               │   │   │   ├── Fomes
│               │   │   │   │   └── Fomes fomentarius
│               │   │   │   ├── Funalia
│               │   │   │   │   └── Funalia trogii
│               │   │   │   ├── Perenniporia
│               │   │   │   │   └── Perenniporia fraxinea
│               │   │   │   ├── Polyporus
│               │   │   │   │   └── Polyporus squamosus
│               │   │   │   └── Trametes
│               │   │   │       ├── Trametes betulina
│               │   │   │       ├── Trametes gibbosa
│               │   │   │       └── Trametes versicolor
│               │   │   └── Sparassidaceae
│               │   │       └── Sparassis
│               │   │           └── Sparassis crispa
│               │   └── Russulales
│               │       ├── Bondarzewiaceae
│               │       │   └── Heterobasidion
│               │       │       ├── Heterobasidion abietinum
│               │       │       ├── Heterobasidion annosum
│               │       │       └── Heterobasidion parviporum
│               │       └── Stereaceae
│               │           └── Stereum
│               │               ├── Stereum hirsutum
│               │               └── Stereum sanguinolentum
│               ├── Dacrymycetes
│               │   └── Dacrymycetales
│               │       └── Dacrymycetaceae
│               │           └── Calocera
│               │               └── Calocera viscosa
│               ├── Exobasidiomycetes
│               │   └── Exobasidiales
│               │       └── Graphiolaceae
│               │           └── Graphiola
│               │               └── Graphiola phoenicis
│               └── Pucciniomycetes
│                   └── Pucciniales
│                       ├── spp. (Rouilles)
│                       ├── Coleosporiaceae
│                       │   └── Coleosporium
│                       │       └── Coleosporium tussilaginis
│                       ├── Cronartiaceae
│                       │   └── Cronartium
│                       │       ├── Cronartium ribicola
│                       │       └── Cronartium pini
│                       ├── Melampsoraceae
│                       │   └── Melampsora
│                       │       └── Melampsora pinitorqua
│                       └── Pucciniastraceae
│                           └── Melampsorella
│                               └── Melampsorella caryophyllacearum
└── Eubacteria
    ├────────────────────────── Wetwood
    ├── Mycoplasmatota
    │   └── Mollicutes
    │       └── Acholeplasmatales
    │           └── Acholeplasmataceae
    │               └── Candidatus Phytoplasma
    │                   └────── Candidatus Phytoplasma prunorum
    └── Pseudomonadota
        ├── Alphaproteobacteria
        │   └── Rhizobiales
        │       └── Rhizobiaceae
        │           └── Agrobacterium
        │               └────── Agrobacterium radiobacter
        └── Gammaproteobacteria
            ├── Enterobacterales
            │   ├── Enterobacteriaceae
            │   │   ├── Erwinia
            │   │   │   └────── Erwinia amylovora
            │   │   └── Gibbsiella
            │   │       └────── Gibbsiella quercinecans
            │   └── Pectobacteriaceae
            │       └── Brenneria
            │           └────── Brenneria goodwinii
            ├── Pseudomonadales
            │   └── Pseudomonadaceae
            │       └── Pseudomonas
            │           ├────── Pseudomonas savastonoi pv. fraxini
            │           └────── Pseudomonas syringae pv. aesculi
            └── Xanthomonadales
                └── Xanthomonadaceae
                    ├── Xanthomonas
                    │   └────── Xanthomonas citri pv. citri
                    └── Xylella
                        └────── Xylella fastidiosa
Virus
├── Artverviricota
│   └── Revtraviricetes
│       └── Ortervirales
│           └── Caulimoviridae
│               └── Badnavirus
│                   └── Chestnut Mosaic Virus
└── Pisuviricota
    └── Stelpaviricetes
        └── Patatavirales
            └── Potyviridae
                └── Potyvirus
                    └── Plum Pox Virus
</pre>



<script>
  const source = document.getElementById('source').textContent.trim().split('\n');
  const view = document.getElementById('view');

  // Construire une structure hiérarchique
  const nodes = source.map((line, index) => {
    const depth = (line.match(/│   |    /g) || []).length;
    const hasChildren = line.includes('[+]');
    return {
      line,
      depth,
      hasChildren,
      visible: depth === 0,
      id: index,
      parent: null
    };
  });

  // Lier les parents
  for (let i = 1; i < nodes.length; i++) {
    for (let j = i - 1; j >= 0; j--) {
      if (nodes[j].depth === nodes[i].depth - 1) {
        nodes[i].parent = nodes[j].id;
        break;
      }
    }
  }

  function render() {
    view.innerHTML = '';
    nodes.forEach((node, i) => {
      if (node.visible) {
        const div = document.createElement('div');
        div.textContent = node.line;
        div.style.whiteSpace = 'pre';

        if (node.hasChildren) {
          div.classList.add('toggle');
          div.addEventListener('click', (e) => {
            e.stopPropagation();
            toggle(node);
          });
        }

        view.appendChild(div);
      }
    });
  }

  function toggle(node) {
  const isExpanded = node.line.includes('[-]');
  node.line = node.line.replace(isExpanded ? '[-]' : '[+]', isExpanded ? '[+]' : '[-]');

  const toggleDepth = node.depth;
  let i = nodes.findIndex(n => n.id === node.id) + 1;
  while (i < nodes.length && nodes[i].depth > toggleDepth) {
    if (isExpanded) {
      // Si on replie : masquer et remettre le marqueur à [+]
      nodes[i].visible = false;
      if (nodes[i].hasChildren) {
        nodes[i].line = nodes[i].line.replace('[-]', '[+]');
      }
    } else {
      // Si on déplie : montrer les enfants directs uniquement
      if (nodes[i].depth === toggleDepth + 1) {
        nodes[i].visible = true;
      }
    }
    i++;
  }

  render();
}

  // Initialiser les signes [+]
  nodes.forEach(node => {
    if (node.hasChildren) {
      node.line = node.line.replace('[+]', '[+]');
    }
  });

  render();
</script>

</body>
</html>
